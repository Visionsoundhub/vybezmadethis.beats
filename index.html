<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Beat Gallery</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Segoe+UI:wght@700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <style>
    /* --- General Body & Layout --- */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      overflow-x: hidden;
      background-color: #0f0f0f;
    }
    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at top, #292929, #0f0f0f 85%), url('https://www.transparenttextures.com/patterns/stardust.png');
      background-repeat: repeat;
      color: #eee;
    }

    /* --- Top Bar (Search & Vibe) --- */
    .top-bar {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 1rem;
        gap: 1rem;
        flex-wrap: wrap;
    }
    .search-container {
      flex-grow: 1;
      display: flex;
      justify-content: center;
    }
    #search-input {
      width: 100%;
      max-width: 480px;
      padding: 0.75rem 1.5rem;
      border-radius: 50px;
      border: 1px solid #555;
      background-color: #222;
      color: #fff;
      font-size: 1rem;
      outline: none;
      transition: all 0.3s ease;
    }
    #search-input::placeholder {
      color: #888;
    }
    #search-input:focus {
      border-color: #7e57c2;
      box-shadow: 0 0 15px rgba(126, 87, 194, 0.5);
    }
    #vibe-search-btn {
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        background: linear-gradient(145deg, #7e57c2, #42a5f5);
        color: white;
        border: none;
        cursor: pointer;
        font-weight: 700;
        font-family: 'Segoe UI', sans-serif;
        transition: all 0.3s ease;
    }
    #vibe-search-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(126, 87, 194, 0.7);
    }


    /* --- Category Filters --- */
    .category-filter {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
      padding: 1rem;
      padding-top: 0;
    }
    .filter-btn {
      font-family: 'Segoe UI', sans-serif;
      font-weight: 700;
      font-size: 0.85rem;
      white-space: nowrap;
      padding: 0.5rem 1rem;
      border-radius: 999px;
      border: 2px solid transparent;
      cursor: pointer;
      color: #e0e0e0;
      background: linear-gradient(145deg, #656565, #333333);
      transition: all 0.2s ease-in-out;
      box-shadow: inset 0px 1px 1px rgba(255, 255, 255, 0.1), 0 2px 4px rgba(0,0,0,0.5);
    }
    .filter-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
      background: linear-gradient(145deg, #777777, #444444);
    }
    .filter-btn.active {
      border-color: #fff;
      color: #111;
      background: linear-gradient(145deg, #d5d5d5, #a0a0a0);
      box-shadow: inset 0px 1px 2px rgba(0, 0, 0, 0.2);
    }

    /* --- Info Boxes --- */
    .info-box {
      max-width: 800px;
      margin: 1rem auto;
      text-align: center;
      font-size: 0.95rem;
      line-height: 1.6;
      color: #ccc;
      background: rgba(255,255,255,0.02);
      padding: 1.5rem;
      border-radius: 12px;
    }
    
    /* --- General Buttons --- */
    .btn {
      font-family: 'Segoe UI', sans-serif;
      font-weight: 700;
      white-space: nowrap;
      padding: 0.4rem 0.9rem;
      border-radius: 999px;
      font-size: 0.85rem;
      background: linear-gradient(145deg, #555555, #2a2a2a);
      color: #e0e0e0;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
      text-decoration: none;
      display: inline-block;
      box-shadow: 0 2px 6px rgba(0,0,0,0.5);
    }
    .btn:hover {
      background: linear-gradient(145deg, #656565, #333333);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    /* --- Beat Cards --- */
    .beat-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 1rem;
      gap: 1.5rem;
    }
    .beat-card {
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 1.5rem;
      width: 100%;
      max-width: 480px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
      transition: transform 0.3s ease;
      display: flex;
      flex-direction: column;
    }
    .beat-card:hover {
      transform: translateY(-5px);
    }
    .beat-title {
      font-family: 'Segoe UI', sans-serif;
      font-weight: 700;
      font-size: 1.2rem;
      margin-bottom: 1rem;
      color: #fff;
      text-align: left;
    }
    
    .card-main-content {
        display: flex;
        align-items: center;
        gap: 1rem;
    }
    .player-container {
        flex: 3;
    }
    .info-and-actions {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
    }
    
    .beat-player iframe {
      border: none;
      width: 100%;
      height: 120px;
      border-radius: 8px;
    }
    .beat-price {
      font-size: 1.1rem;
      font-weight: 600;
      color: #00ff99;
    }
    .beat-price.sold {
      color: #ff5555;
      text-decoration: none;
    }
    .actions-wrapper {
        position: relative;
    }
    .contact-options {
        position: absolute;
        bottom: calc(100% + 8px);
        left: 50%;
        transform: translateX(-50%);
        background: #333;
        border: 1px solid #555;
        padding: 0.5rem;
        border-radius: 8px;
        z-index: 10;
        display: none;
        flex-direction: column;
        gap: 0.5rem;
        box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    }
    .contact-options .btn {
        margin: 0;
    }
    
    /* --- Custom Audio Player --- */
    .custom-audio-player {
        display: flex;
        align-items: center;
        background: #222;
        border-radius: 50px;
        padding: 5px 10px;
        border: 1px solid #444;
    }
    .play-pause-btn {
        background: linear-gradient(145deg, #d5d5d5, #a0a0a0);
        color: #111;
        border: none;
        border-radius: 50%;
        width: 35px;
        height: 35px;
        font-size: 14px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-right: 10px;
        flex-shrink: 0;
    }
    .progress-bar-container {
        flex-grow: 1;
        background: #444;
        border-radius: 10px;
        height: 8px;
        cursor: pointer;
        overflow: hidden;
    }
    .progress-bar {
        background: linear-gradient(90deg, #7e57c2, #42a5f5);
        width: 0%;
        height: 100%;
        border-radius: 10px;
    }
    .time-display {
        font-size: 0.75rem;
        color: #aaa;
        margin-left: 10px;
        min-width: 40px;
        text-align: right;
    }

    /* --- Vibe Search Modal --- */
    .vibe-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        backdrop-filter: blur(10px);
        display: none; /* Hidden by default */
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    .vibe-modal-overlay.visible {
        display: flex;
        opacity: 1;
    }
    .vibe-modal-content {
        position: relative;
        background: transparent;
        text-align: center;
        width: 90vw;
        height: 90vw;
        max-width: 600px;
        max-height: 600px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        transform: scale(0.9);
        transition: transform 0.3s ease;
    }
     #vibe-visualizer {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100%;
        height: 100%;
        z-index: -1;
    }
    .vibe-modal-overlay.visible .vibe-modal-content {
        transform: scale(1);
    }
    .vibe-modal-content h2 {
        margin-top: 0;
        font-family: 'Segoe UI', sans-serif;
    }
    .vibe-bubbles {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1rem;
        margin-top: 1.5rem;
    }
    .vibe-bubble {
        padding: 0.8rem 1.5rem;
        border-radius: 50px;
        border: 1px solid #555;
        background: #333;
        color: #fff;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
        animation-name: float;
        animation-iteration-count: infinite;
        animation-direction: alternate;
        animation-timing-function: ease-in-out;
    }
    .vibe-bubble:hover {
        background: #7e57c2;
        transform: scale(1.1) translateY(-5px);
        border-color: #7e57c2;
        animation-play-state: paused;
    }
    .vibe-modal-close {
        position: absolute;
        top: 20px; 
        right: 20px;
        font-size: 2.5rem;
        color: #fff;
        cursor: pointer;
        font-weight: 300;
        transition: transform 0.3s ease;
        background: rgba(0,0,0,0.5);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        justify-content: center;
        align-items: center;
        line-height: 1;
    }
    .vibe-modal-close:hover {
        transform: rotate(90deg);
    }
    
    @keyframes float {
        0% {
            transform: translateY(0px);
        }
        100% {
            transform: translateY(-10px);
        }
    }
    @keyframes pulse-border {
        0% {
            box-shadow: 0 0 20px rgba(126, 87, 194, 0.4);
            border-color: rgba(126, 87, 194, 0.7);
        }
        50% {
            box-shadow: 0 0 35px rgba(66, 165, 245, 0.6);
            border-color: rgba(66, 165, 245, 1);
        }
        100% {
            box-shadow: 0 0 20px rgba(126, 87, 194, 0.4);
            border-color: rgba(126, 87, 194, 0.7);
        }
    }

    /* Mobile-specific adjustments */
    @media (max-width: 600px) {
        .vibe-modal-content {
            padding: 1rem; /* Less padding on small screens */
        }
        .vibe-modal-content h2 {
            font-size: 1.5rem; /* Smaller title */
        }
        .vibe-modal-content p {
            font-size: 0.9rem; /* Smaller paragraph */
        }
        .vibe-bubble {
            padding: 0.6rem 1.2rem; /* Smaller bubbles */
            font-size: 0.9rem;
        }
        .vibe-modal-close {
            top: 15px;
            right: 15px;
            width: 35px;
            height: 35px;
            font-size: 2rem;
        }
        .card-main-content {
            flex-direction: column;
        }
        .info-and-actions {
            width: 100%;
            flex-direction: row;
            justify-content: space-between;
        }
    }

  </style>
</head>
<body>

<!-- Top Bar -->
<div class="top-bar">
  <div class="search-container">
    <input type="text" id="search-input" placeholder="Αναζήτηση με τίτλο ή tag...">
  </div>
  <button id="vibe-search-btn">Vibe Search</button>
</div>

<!-- Category Filter Buttons -->
<div class="category-filter">
  <button class="filter-btn active" data-category="all">Όλα</button>
  <button class="filter-btn" data-category="trap">Trap / Drill</button>
  <button class="filter-btn" data-category="boombap">Rap / Boombap</button>
  <button class="filter-btn" data-category="latin">Latin Urban / Afro</button>
  <button class="filter-btn" data-category="lofi">Lofi</button>
  <button class="filter-btn" data-category="custom">Custom</button>
  <button class="filter-btn" data-category="vault">Vault Beats</button>
  <button class="filter-btn" data-category="ai">AI Access</button>
</div>

<!-- Info Boxes... -->
<div class="info-box" id="aiInfoBox" style="display:none;">
  <button onclick="toggleAiDescription()" class="btn">Τι είναι το AI Access;</button>
  <div id="aiDescription" style="display:none; margin-top: 1rem;">Τα beats στην κατηγορία AI Access είναι δημιουργημένα μερικώς από εργαλεία τεχνητής νοημοσύνης. Η δομή και η μίξη έχει γίνει χειροποίητα από τον Vybezmadethis στο Vision Sound Studio.<br><br>Αυτή η κατηγορία αφορά αποκλειστικά leasing χρήση: δηλαδή μπορείς να χρησιμοποιήσεις το beat για προσωπικά ή εμπορικά projects χωρίς να αποκτήσεις την αποκλειστική του κυριότητα. Μπορεί να το χρησιμοποιούν και άλλοι, αλλά η χρήση σου είναι νόμιμη και επιτρεπτή για δημιουργία περιεχομένου.</div>
</div>
<div class="info-box" id="vaultInfoBox" style="display: none;">
  <button onclick="toggleVaultDescription()" class="btn">Τι είναι τα Vault Beats;</button>
  <div id="vaultDescription" style="display:none; margin-top: 1rem;">Τα Vault Beats είναι beats που δεν μπορούν πλέον να επεξεργαστούν περαιτέρω είτε επειδή έχουν χαθεί τα αρχικά projects είτε γιατί ήταν πειραματικά ή πρώιμα drafts.<br><br>Παρότι δεν είναι διαθέσιμα σε μορφή stems, και δεν υπάρχουν projects, έχει γίνει επεξεργασία πάνω τους και διατίθενται σε πιο προσιτή τιμή και διατηρούν την ενέργεια και το vibe τους για όσους ψάχνουν ιδιαίτερους ήχους με low budget.</div>
</div>
<div class="info-box" id="customInfoBox" style="display: none;">
    <p>Εδώ θα βρείτε δείγματα από custom παραγωγές που έχουν γίνει για άλλους καλλιτέχνες.</p>
    <p>Αν θέλεις το δικό σου μοναδικό beat, στείλε email στο <a href="mailto:studiovisionsound@gmail.com" style="color: #7e57c2;">studiovisionsound@gmail.com</a> με τις ιδέες σου ή επικοινώνησε στο <a href="https://www.instagram.com/visionsoundhub.gr" target="_blank" style="color: #7e57c2;">Instagram</a>.</p>
    <p style="margin-top: 1rem; font-weight: bold;">Η διαδικασία για custom beat ξεκινά από 100€, με την τελική τιμή να διαμορφώνεται ανάλογα με την πολυπλοκότητα.</p>
</div>
<div class="info-box" id="generalInfoBox" style="display: block;">
  <button onclick="toggleGeneralInfo()" class="btn">Χρήσιμες πληροφορίες</button>
  <div id="generalInfo" style="display:none; margin-top: 1rem;">Όλα τα beats (εκτός από την κατηγορία AI Access) δεν διατίθενται με leasing.<br>Οι αναγραφόμενες τιμές αφορούν την αγορά του beat σε μορφή MP3 και WAV.<br><br>Για παράδοση των stems, υπάρχει επιπλέον χρέωση (20€).<br><br>Όλα τα beats συνοδεύονται από σύντομο voice tag στην αρχή, ως στοιχείο branding του παραγωγού.<br><br>Ο αγοραστής αποκτά αποκλειστικά δικαιώματα χρήσης για τη συγκεκριμένη δημιουργία όχι την πλήρη κυριότητα. Ο δημιουργός μπορεί να το χρησιμοποιήσει σε δικά του projects (όπως instrumental ή release στις πλατφόρμες) αλλά δεν επιτρέπεται να το μεταπωλήσει σε άλλον καλλιτέχνη.</div>
</div>

<!-- Vibe Search Modal -->
<div class="vibe-modal-overlay" id="vibe-modal">
    <div class="vibe-modal-content" id="vibe-modal-content">
        <canvas id="vibe-visualizer"></canvas>
        <span class="vibe-modal-close" id="vibe-modal-close">&times;</span>
        <h2>Πώς νιώθεις σήμερα;</h2>
        <p>Διάλεξε ένα vibe για να βρεις το κατάλληλο beat.</p>
        <div class="vibe-bubbles">
            <div class="vibe-bubble" data-vibe-tags="love,romantic,smooth">Ερωτευμένος</div>
            <div class="vibe-bubble" data-vibe-tags="sad,emotional,dark,melancholic">Μελαγχολικός</div>
            <div class="vibe-bubble" data-vibe-tags="aggressive,hard,drill">Θέλω να χώσω μπάρες</div>
            <div class="vibe-bubble" data-vibe-tags="chill,lofi,relax">Για χαλάρωση</div>
            <div class="vibe-bubble" data-vibe-tags="party,upbeat,dancehall">Για πάρτι</div>
            <div class="vibe-bubble" data-vibe-tags="epic,cinematic,storytelling">Κινηματογραφικό</div>
        </div>
    </div>
</div>


<!-- This is where the beats will be rendered -->
<div class="beat-grid" id="beatGrid"></div>

<script>
  // --- ΔΕΔΟΜΕΝΑ ΓΙΑ ΤΑ BEATS ΣΟΥ ---
  const beatsData = [
    {
      id: 5,
      title: 'Marios Beat (Custom Sample)',
      playerType: 'audio',
      audioSrc: 'https://github.com/Visionsoundhub/vybezmadethis.beats/raw/refs/heads/main/Marios%20beat%20extended%2099BPM%20Eminor.mp3',
      price: null, // No price for custom samples
      stemsPrice: null,
      status: 'available',
      category: 'custom',
      licenseType: 'exclusive',
      tags: ['custom', 'melodic', 'emotional', 'sad']
    },
    {
      id: 3,
      title: 'AI Experiment #1',
      playerType: 'audio',
      audioSrc: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3', // Placeholder MP3
      price: '15€',
      stemsPrice: null,
      status: 'available',
      category: 'ai',
      licenseType: 'leasing',
      tags: ['experimental', 'electronic', 'future']
    },
     {
      id: 4,
      title: 'Old Vault Sketch',
      playerType: 'audio',
      audioSrc: '', // No audio source for this example
      price: '30€',
      stemsPrice: null,
      status: 'sold',
      category: 'vault',
      licenseType: 'exclusive',
      tags: ['raw', 'draft', 'lofi-sketch']
    },
    {
      id: 6,
      title: 'Fire Bars',
      playerType: 'audio',
      audioSrc: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3',
      price: '80€',
      stemsPrice: '20€',
      status: 'available',
      category: 'trap',
      licenseType: 'exclusive',
      tags: ['aggressive', 'hard', 'drill']
    },
    {
      id: 7,
      title: 'Love Sunset',
      playerType: 'audio',
      audioSrc: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3',
      price: '80€',
      stemsPrice: '20€',
      status: 'available',
      category: 'lofi',
      licenseType: 'exclusive',
      tags: ['love', 'romantic', 'smooth', 'chill']
    }
  ];

  // --- CORE LOGIC ---

  const beatGrid = document.getElementById('beatGrid');
  const searchInput = document.getElementById('search-input');
  let currentlyPlayingAudio = null;

  function renderBeats(filter) {
    if (!beatGrid) return;
    beatGrid.innerHTML = '';

    let filteredBeats = beatsData;

    if (filter.type === 'category') {
        filteredBeats = filter.value === 'all'
            ? beatsData.filter(beat => beat.category !== 'ai' && beat.category !== 'custom')
            : beatsData.filter(beat => beat.category === filter.value);
    }
    if (filter.type === 'search') {
        filteredBeats = beatsData.filter(beat => {
            const titleMatch = beat.title.toLowerCase().includes(filter.value);
            const tagMatch = beat.tags.some(tag => tag.toLowerCase().includes(filter.value));
            return titleMatch || tagMatch;
        });
    }
    if (filter.type === 'vibe') {
        filteredBeats = beatsData.filter(beat => 
            beat.tags.some(tag => filter.value.includes(tag))
        );
    }

    if (filteredBeats.length === 0) {
        beatGrid.innerHTML = '<p style="color: #888;">Δεν βρέθηκαν beats που να ταιριάζουν με την αναζήτησή σας.</p>';
        return;
    }

    filteredBeats.forEach(beat => {
      const card = document.createElement('div');
      card.className = 'beat-card';

      let playerHtml = '';
      if (beat.playerType === 'soundcloud' && beat.audioSrc) {
        playerHtml = `<div class="player-container"><iframe src="${beat.audioSrc}" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe></div>`;
      } else if (beat.playerType === 'audio' && beat.audioSrc) {
        playerHtml = `
          <div class="player-container custom-audio-player" id="player-${beat.id}">
            <button class="play-pause-btn"><i class="fas fa-play"></i></button>
            <div class="progress-bar-container">
              <div class="progress-bar"></div>
            </div>
            <div class="time-display">0:00</div>
            <audio class="audio-element" src="${beat.audioSrc}" preload="metadata"></audio>
          </div>
        `;
      } else {
        playerHtml = `<div class="player-container"><p style="color: #888; font-size: 0.8rem;">Το Preview δεν είναι διαθέσιμο</p></div>`;
      }

      const priceHtml = beat.price ? `
        <div class="beat-price ${beat.status === 'sold' ? 'sold' : ''}">
            ${beat.status === 'sold' ? 'SOLD' : beat.price}
        </div>` : '';

      card.innerHTML = `
        <div class="beat-title">${beat.title}</div>
        <div class="card-main-content">
            ${playerHtml}
            <div class="info-and-actions">
                ${priceHtml}
                ${beat.status !== 'sold' ? `
                    <div class="actions-wrapper">
                        <button class="btn" onclick="toggleContactOptions(${beat.id})">Ζήτα το</button>
                        <div class="contact-options" id="contact-options-${beat.id}">
                          <a href="mailto:studiovisionsound@gmail.com?subject=Beat Inquiry: ${beat.title}" class="btn">Email</a>
                          <a href="https://www.instagram.com/visionsoundhub.gr?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank" class="btn">Instagram</a>
                        </div>
                    </div>
                ` : ''}
            </div>
        </div>
      `;
      beatGrid.appendChild(card);
    });
    
    setupCustomPlayers();
  }
  
  function setupCustomPlayers() {
    document.querySelectorAll('.custom-audio-player').forEach(player => {
        const audio = player.querySelector('.audio-element');
        const playPauseBtn = player.querySelector('.play-pause-btn');
        const playIcon = playPauseBtn.querySelector('i');
        const progressBar = player.querySelector('.progress-bar');
        const progressBarContainer = player.querySelector('.progress-bar-container');
        const timeDisplay = player.querySelector('.time-display');

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }

        playPauseBtn.addEventListener('click', () => {
            const isPlaying = audio.currentTime > 0 && !audio.paused && !audio.ended;
            if (isPlaying) {
                audio.pause();
            } else {
                if (currentlyPlayingAudio && currentlyPlayingAudio !== audio) {
                    currentlyPlayingAudio.pause();
                }
                currentlyPlayingAudio = audio;
                audio.play();
            }
        });

        audio.addEventListener('play', () => {
            playIcon.className = 'fas fa-pause';
        });

        audio.addEventListener('pause', () => {
            playIcon.className = 'fas fa-play';
        });

        audio.addEventListener('timeupdate', () => {
            const { currentTime, duration } = audio;
            const progressPercent = (currentTime / duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
            if (duration) {
                timeDisplay.textContent = `${formatTime(currentTime)}`;
            }
        });
        
        audio.addEventListener('loadedmetadata', () => {
             if (audio.duration) {
                timeDisplay.textContent = `0:00`;
            }
        });

        progressBarContainer.addEventListener('click', (e) => {
            const width = progressBarContainer.clientWidth;
            const clickX = e.offsetX;
            const duration = audio.duration;
            audio.currentTime = (clickX / width) * duration;
        });
    });
  }

  function toggleContactOptions(beatId) {
      const currentOptions = document.getElementById(`contact-options-${beatId}`);
      if (!currentOptions) return;
      const isVisible = currentOptions.style.display === 'flex';
      document.querySelectorAll('.contact-options').forEach(el => {
          el.style.display = 'none';
      });
      currentOptions.style.display = isVisible ? 'none' : 'flex';
  }

  // --- INITIALIZATION & EVENT LISTENERS ---

  function toggleAiDescription() {
    const desc = document.getElementById("aiDescription");
    if (desc) desc.style.display = desc.style.display === "none" ? "block" : "none";
  }
  function toggleVaultDescription() {
    const desc = document.getElementById("vaultDescription");
    if (desc) desc.style.display = desc.style.display === "none" ? "block" : "none";
  }
  function toggleGeneralInfo() {
    const desc = document.getElementById("generalInfo");
    if (desc) desc.style.display = desc.style.display === "none" ? "block" : "none";
  }

  const categoryButtons = document.querySelectorAll('.filter-btn');
  const aiInfoBox = document.getElementById('aiInfoBox');
  const vaultInfoBox = document.getElementById('vaultInfoBox');
  const customInfoBox = document.getElementById('customInfoBox');
  const generalInfoBox = document.getElementById('generalInfoBox');

  categoryButtons.forEach(button => {
    button.addEventListener('click', () => {
      document.querySelector('.filter-btn.active')?.classList.remove('active');
      button.classList.add('active');
      const selectedCategory = button.getAttribute('data-category');
      searchInput.value = ''; 
      
      if (aiInfoBox) aiInfoBox.style.display = selectedCategory === 'ai' ? 'block' : 'none';
      if (vaultInfoBox) vaultInfoBox.style.display = selectedCategory === 'vault' ? 'block' : 'none';
      if (customInfoBox) customInfoBox.style.display = selectedCategory === 'custom' ? 'block' : 'none';
      if (generalInfoBox) generalInfoBox.style.display = (selectedCategory !== 'ai' && selectedCategory !== 'vault' && selectedCategory !== 'custom') ? 'block' : 'none';
      
      renderBeats({type: 'category', value: selectedCategory});
    });
  });
  
  searchInput.addEventListener('input', () => {
    const searchTerm = searchInput.value.toLowerCase().trim();
    document.querySelector('.filter-btn.active')?.classList.remove('active');
    renderBeats({type: 'search', value: searchTerm});
  });

  // Vibe Search Modal Logic
  const vibeBtn = document.getElementById('vibe-search-btn');
  const vibeModal = document.getElementById('vibe-modal');
  const vibeModalClose = document.getElementById('vibe-modal-close');
  const vibeBubbles = document.querySelectorAll('.vibe-bubble');
  const canvas = document.getElementById('vibe-visualizer');
  const ctx = canvas.getContext('2d');
  let animationFrameId;

  function resizeCanvas() {
      const container = document.getElementById('vibe-modal-content');
      if (!container) return; // Guard clause
      const size = Math.min(container.clientWidth, container.clientHeight);
      canvas.width = size;
      canvas.height = size;
  }

  function drawVisualizer() {
      const radius = canvas.width / 3; // Base radius
      const points = 128;
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const time = Date.now() * 0.0005;

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.beginPath();
      
      for (let i = 0; i <= points; i++) {
          const angle = (i / points) * Math.PI * 2;
          const wave = Math.sin(time + i * 0.5) * 10; // Wave amplitude
          const pulse = (Math.sin(time * 2) + 1) / 2 * 15; // Pulsing amplitude
          const currentRadius = radius + wave + pulse;
          
          const x = centerX + Math.cos(angle) * currentRadius;
          const y = centerY + Math.sin(angle) * currentRadius;

          if (i === 0) {
              ctx.moveTo(x, y);
          } else {
              ctx.lineTo(x, y);
          }
      }
      
      const gradient = ctx.createRadialGradient(centerX, centerY, radius - 20, centerX, centerY, radius + 20);
      gradient.addColorStop(0, 'rgba(255, 255, 255, 0)');
      gradient.addColorStop(0.5, 'rgba(200, 200, 255, 0.8)');
      gradient.addColorStop(1, 'rgba(126, 87, 194, 0)');

      ctx.strokeStyle = gradient;
      ctx.lineWidth = 2;
      ctx.stroke();
      ctx.shadowColor = 'rgba(200, 200, 255, 0.8)';
      ctx.shadowBlur = 15;
      ctx.stroke();
      ctx.shadowBlur = 0;


      animationFrameId = requestAnimationFrame(drawVisualizer);
  }


  vibeBtn.addEventListener('click', () => {
      vibeModal.classList.add('visible');
      resizeCanvas();
      if (animationFrameId) cancelAnimationFrame(animationFrameId);
      drawVisualizer();
  });

  vibeModalClose.addEventListener('click', () => {
      vibeModal.classList.remove('visible');
      cancelAnimationFrame(animationFrameId);
  });
  
  vibeModal.addEventListener('click', (e) => {
      if (e.target === vibeModal) {
          vibeModal.classList.remove('visible');
          cancelAnimationFrame(animationFrameId);
      }
  });

  vibeBubbles.forEach(bubble => {
      const duration = Math.random() * 2 + 3;
      const delay = Math.random() * 2;
      bubble.style.animationDuration = `${duration}s`;
      bubble.style.animationDelay = `-${delay}s`;

      bubble.addEventListener('click', () => {
          const tags = bubble.dataset.vibeTags.split(',');
          searchInput.value = '';
          document.querySelector('.filter-btn.active')?.classList.remove('active');
          renderBeats({type: 'vibe', value: tags});
          vibeModal.classList.remove('visible');
          cancelAnimationFrame(animationFrameId);
      });
  });

  window.addEventListener('resize', resizeCanvas);


  renderBeats({type: 'category', value: 'all'});

</script>
</body>
</html>
```

Έκανα τις αλλαγές που ζήτησες. Τώρα το Vibe Search έχει το εντυπωσιακό, κυματοειδές animation που ήθελ
